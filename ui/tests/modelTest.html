<script>
  document.getElementsByTagName('title')[0].innerHTML = 'mnodelTest'

  /* Test de modelos */
  // No funciona
</script>


<div style="display:none">
    <div data-sivWidget="Siviglia.model.web.Site.views.View" data-widgetCode="Siviglia.model.web.Site.views.View">
        <div><span>Id:</span><span data-sivValue="/*instance/id_site"></span></div>
        <div><span>host:</span><span data-sivValue="/*instance/host"></span></div>
        <div><span>canonical_url:</span><span data-sivValue="/*instance/canonical_url"></span></div>
        <div><span>namespace:</span><span data-sivValue="/*instance/namespace"></span></div>
        <div><span>websiteName:</span><span data-sivValue="/*instance/websiteName"></span></div>
    </div>
</div>


<div data-sivView="Siviglia.model.web.Site.views.View" data-sivParams='{"id_site":2}'></div>

<script>
    Siviglia.Utils.buildClass({
        "context":"Siviglia.model.web.Site.views",
        "classes":{
            View:{
                "inherits":"Siviglia.UI.Expando.View",
                "methods":{
                    preInitialize:function(params)
                    {
                        var p=$.Deferred();
                        var m=this;
                        var f=new Siviglia.Model.ModelFactory();
                        f.load("/model/web/Site",params.id_site).then(function(instance){
                            m.instance=instance;
                            p.resolve();
                        })
                        return p;
                    },
                    initialize:function(params){}
                }
            }
        }
    });
</script>