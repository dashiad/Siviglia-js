<!-- templateInit -->
<div data-sivWidget="default-values" data-widgetParams="" data-widgetCode="Test.DefaultValues">
    <div data-sivView="Siviglia.inputs.jqwidgets.StdInputContainer"
         data-sivParams='{"controller":"*self","parent":"*type","form":"*form","key":"simpleContainer"}'></div>
    <input type="button" data-sivEvent="click" data-sivCallback="doSubmit" value="Enviar"></div>
<!-- templateEnd -->

<!-- viewInit -->
<div data-sivView="default-values"></div>
<!-- viewEnd -->

<script>
  //codeInit
  Siviglia.Utils.buildClass({
    context: 'Test',
    classes: {
      DefaultValues: {
        inherits: "Siviglia.inputs.jqwidgets.Form",
        methods: {
          preInitialize: function (params) {
            // this.factory = Siviglia.types.TypeFactory;
            // this.self = this;
            // this.typeCol = [];
            this.formDefinition = new Siviglia.model.BaseTypedObject({
              FIELDS: {
                simpleContainer: {
                  "TYPE": "Container",
                  "LABEL": "Container con valores por defecto",
                  "FIELDS": {
                    defaultNotModified: {
                      "TYPE": "Container",
                      "LABEL": "Container sin modificar valor",
                      "FIELDS": {
                        defaultField: {
                          "TYPE": "String",
                          "LABEL": "Campo default",
                          "DEFAULT": "ZZZ",
                        },
                        noDefaultField: {
                          "TYPE": "String",
                          "LABEL": "Campo no default",
                        }
                      }
                    },
                    defaultModified: {
                      "TYPE": "Container",
                      "LABEL": "Container con valor modificado",
                      "FIELDS": {
                        defaultField: {
                          "TYPE": "String",
                          "LABEL": "Campo default",
                          "DEFAULT": "ZZZ",
                        },
                        noDefaultField: {
                          "TYPE": "String",
                          "LABEL": "Campo no default",
                        }
                      }
                    },
                  }
                }
              },
              "INPUTPARAMS": {
                "/simpleContainer": {
                  "INPUT": "ByFieldContainer",
                }
              }
            });
            this.formDefinition.setValue({simpleContainer: {defaultModified: {noDefaultField: "AAA"}}})

            return this.Form$preInitialize({bto: this.formDefinition});
          },
          doSubmit: function () {
            this.formDefinition.save();
            console.dir(this.formDefinition.getPlainValue());
          }
        }
      }
    }
  })

  //codeEnd
</script>