<!-- templateInit -->
<div data-sivWidget="typeSwitcher-field-complex-fields" data-widgetParams=""
     data-widgetCode="Test.TypeSwitcherFieldComplexFields">
    <div class="label">TypeSwitcher con campos complejos:</div>
    <div data-sivView="Siviglia.inputs.jqwidgets.StdInputContainer"
         data-sivParams='{"controller":"*self","parent":"*type","form":"*form","key":"simpleTypeSwitcher"}'></div>
</div>
<!-- templateEnd -->

<!-- viewInit -->
<div data-sivView="typeSwitcher-field-complex-fields"></div>
<!-- viewEnd -->

<script>
  //codeInit
  Siviglia.Utils.buildClass({
    context: 'Test',
    classes: {
      TypeSwitcherFieldComplexFields: {
        inherits: "Siviglia.inputs.jqwidgets.Form",
        methods: {
          preInitialize: function (params) {
            this.factory = Siviglia.types.TypeFactory;
            this.self = this;
            this.typeCol = [];
            this.formDefinition = new Siviglia.model.BaseTypedObject({
              "FIELDS": {
                simpleTypeSwitcher: {
                  "LABEL": "Campo TypeSwitcher",
                  "TYPE": "TypeSwitcher",
                  "TYPE_FIELD": "typeField",
                  CONTENT_FIELD: 'contentField',
                  "ALLOWED_TYPES": {
                    "containerType": {
                      "TYPE": "Container",
                      LABEL: 'Campo Container',
                      FIELDS: {
                        field1: {
                          LABEL: 'Campo 1',
                          TYPE: 'String',
                        },
                        field2: {
                          LABEL: 'Campo 2',
                          TYPE: 'Integer'
                        }
                      }
                    },
                    "arrayType": {
                      "TYPE": "Array",
                      LABEL: 'Campo Array',
                      ELEMENTS: {
                        TYPE: 'String'
                      }
                    },
                    dictionaryType: {
                      TYPE: 'Dictionary',
                      LABEL: 'Campo Dictionary',
                      VALUETYPE: {
                        TYPE: 'String'
                      }
                    },
                    // ToDo: no se est√° mostrando el contenido del TypeSwitcher interior
                    typeSwitcherType: {
                      TYPE: 'TypeSwitcher',
                      LABEL: 'Campo TypeSwitcher',
                      ALLOWED_TYPES: {
                        typeOne: {
                          TYPE: 'String',
                          LABEL: 'Campo String',
                        },
                        typeTwo: {
                          TYPE: 'Integer',
                          LABEL: 'Campo Integer',
                        }
                      }
                    },
                  }
                }
              }
            });
            this.formDefinition.simpleTypeSwitcher = {typeField: 'containerType', field1: 'AAA', field2: 4}

            return this.Form$preInitialize({bto: this.formDefinition});
          },
          initialize: function (params) {
          },
        }
      }
    }
  })

  //codeEnd
</script>