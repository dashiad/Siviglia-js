<!DOCTYPE html>
<html lang="en">
<head>
    <title>jQuery ComboBox</title>
    <link rel="stylesheet" href="../../../../jqwidgets/styles/jqx.base.css" type="text/css" />
    <script src="/node_modules/jquery/dist/jquery.js"></script>
    <script type="text/javascript" src="../../../../jqwidgets/jqxcore.js"></script>
    <script type="text/javascript" src="../../../../jqwidgets/jqxbuttons.js"></script>
    <script type="text/javascript" src="../../../../jqwidgets/jqxscrollbar.js"></script>
    <script type="text/javascript" src="../../../../jqwidgets/jqxlistbox.js"></script>
    <script type="text/javascript" src="../../../../jqwidgets/jqxcombobox.js"></script>
    <script src="../../../Siviglia.js"></script>
    <script src="../../../SivigliaStore.js"></script>

    <script src="../../../SivigliaTypes.js"></script>
    <script src="../../../Model.js"></script>
</head>
<body>
<div id='content'>
    <script type="text/javascript">
        Siviglia.Utils.buildClass({
           "context":"Test",
           classes:{
               "Combo":{
                   inherits:"Siviglia.UI.Expando.View",
                   destruct:function(){


                       this.rootNode.html("");
                   },
                   methods:{
                       preInitialize:function(params)
                       {

                       },
                       initialize:function(params)
                       {
                           var source = [
                               "Affogato",
                               "Americano",
                               "Bicerin",
                               "Breve",
                               "Café Bombón",
                               "Café au lait",
                               "Caffé Corretto",
                               "Café Crema",
                               "Caffé Latte",
                           ];
                           var current=$("<div></div>");
                           // Create a jqxComboBox
                           current.jqxComboBox({ source: source, selectedIndex: 0, width: '200px', height: '25px' });
                           // disable the sixth item.
                           current.jqxComboBox('disableAt', 5);
                           // bind to 'select' event.
                           current.bind('select', function (event) {
                               var args = event.args;
                               var item = current.jqxComboBox('getItem', args.index);
                               alert('Selected: ' + item.label);
                           });
                           this.rootNode.append(current);
                           setTimeout(function(){
                               console.log("DESTROYING");

                               this.rootNode.jqxComboBox("destroy");
                               this.destruct();
                           }.bind(this),3000);
                       }
                   }
               }
           }
        });
    </script>
    <div style="display:none">
        <div data-sivWidget="Test.Combo" data-widgetCode="Test.Combo">
        </div>
    </div>



    <div id='jqxcombobox'>
    </div>
    <input type="button" onclick="recreate()">
    <script>
        $(document).ready(function () {
            var source = [
                "Affogato",
                "Americano",
                "Bicerin",
                "Breve",
                "Café Bombón",
                "Café au lait",
                "Caffé Corretto",
                "Café Crema",
                "Caffé Latte",
            ];
            // Create a jqxComboBox
            $("#jqxcombobox").jqxComboBox({ source: source, selectedIndex: 0, width: '200px', height: '25px' });
            // disable the sixth item.
            $("#jqxcombobox").jqxComboBox('disableAt', 5);
            // bind to 'select' event.
            $('#jqxcombobox').bind('select', function (event) {
                var args = event.args;
                var item = $('#jqxcombobox').jqxComboBox('getItem', args.index);
                alert('Selected: ' + item.label);
            });
        });
        setTimeout(function(){

            $("#jqxcombobox").jqxComboBox("destroy");
        },1000);
        var parser=new Siviglia.UI.HTMLParser();
        parser.parse($(document.body));
    </script>
</div>
</body>
</html>
