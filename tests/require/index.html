<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Require test</title>
    <script src="../../../../node_modules/jquery/dist/jquery.js"></script>
    <script src="../../../../packages/Siviglia/Siviglia.js"></script>
</head>
<body style="background-color:#EEE; background-image:none;">
<script>
  Siviglia.debug = true;

  Siviglia.config = {
    baseUrl: 'http://reflection.adtopy.com/',
    // staticsUrl: 'http://statics.adtopy.com/',
    staticsUrl: '../../../../',
    metadataUrl: 'http://metadata.adtopy.com/',
  };
</script>

<script>
  var signingBook = []

  // Test básico del funcionamiento de require
  /*var dependencyList = [
    'stubs/simpleDependency.js',
  ]*/

  // Test de carga de distintos tipos de recurso
  /*var dependencyList = [
    '/packages/Siviglia/tests/require/stubs/mock.html',
    '/packages/Siviglia/tests/require/stubs/mock.js',
    '/packages/Siviglia/tests/require/stubs/mock.css'
  ]*/

  // Test de carga de widget por objeto
  /*var dependencyList = [
    {
      template: '/packages/Siviglia/tests/require/stubs/widgetMock.html',
      js: '/packages/Siviglia/tests/require/stubs/widgetMock.js',
    },
  ]*/

  // Test de paths
  /*var dependencyList = [
    // para widgets funciona poner el path desde el raiz SIN BARRA '/'
    'packages/Siviglia/tests/require/stubs/widgetMock',
    // para un recurso de otro tipo falla
    'packages/Siviglia/tests/require/stubs/mock.js',
    // funciona si el mismo path comienza con '/'
    '/packages/Siviglia/tests/require/stubs/mock.html',
    // para recursos no widget funciona poner un path relativo al directorio del archivo
    // que genera el contexto principal
    'stubs/mock.css',
    // para widgets no funciona el path relativo al directorio del archivo
    // que genera el contexto principal
    'stubs/widgetMock',
    // Cuando se carga por objeto funciona correctamente con y sin '/' al ppio
    {
      template: '/packages/Siviglia/tests/require/stubs/widgetMock.html',
      js: '/packages/Siviglia/tests/require/stubs/widgetMock.js',
    },
    {
      template: 'packages/Siviglia/tests/require/stubs/widgetMock.html',
      js: 'packages/Siviglia/tests/require/stubs/widgetMock.js',
    },
  ]*/

  // Test de verificación de relaciones entre dependencias
  /*var dependencyList = [
     'chainTest.js',
    // 'multipleTest.js',
    // 'mutualRequirementTest.js',
    // 'chainedMultipleTest.js',
  ]*/


  Siviglia.require(dependencyList, false).then(function () {
    $(document).ready(function () {
      console.log('running main context')
      signingBook.push('Main context')
    })
  })
</script>
</body>
</html>
