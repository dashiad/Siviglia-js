<?php
namespace model\web\Site\datasources;
/**
 FILENAME:/var/www/adtopy/model/web/objects/Site/datasources/FullPages.php
  CLASS:FullPages
*
*
**/

class FullPages
{
	 static  $definition=array(
               'LABEL'=>'FullPages',
               'DATAFORMAT'=>'Table',
               'ROLE'=>'MxNlist',
               'IS_ADMIN'=>0,
               'INDEXFIELDS'=>array(
                     'id_site'=>array(
                           'MODEL'=>'\model\web\Site',
                           'FIELD'=>'id_site',
                           'REQUIRED'=>'true'
                           )
                     ),
               'RELATION'=>'Pages',
               'PARAMS'=>array(
                     'id_site'=>array(
                           'MODEL'=>'\model\web\Page',
                           'FIELD'=>'id_site',
                           'TRIGGER_VAR'=>'id_site'
                           )
                     ),
               'INCLUDE'=>array(
                     '\model\Page'=>array(
                           'MODEL'=>'\model\Page',
                           'DATASOURCE'=>'View',
                           'JOINTYPE'=>'LEFT',
                           'JOIN'=>array('id_site'=>'id_site')
                           )
                     ),
               'PERMISSIONS'=>array('PUBLIC'),
               'FIELDS'=>array(
                     'id_site'=>array(
                           'MODEL'=>'\model\web\Page',
                           'FIELD'=>'id_site'
                           ),
                     'host'=>array(
                           'MODEL'=>'\model\web\Site',
                           'FIELD'=>'host'
                           ),
                     'canonical_url'=>array(
                           'MODEL'=>'\model\web\Site',
                           'FIELD'=>'canonical_url'
                           ),
                     'hasSSL'=>array(
                           'MODEL'=>'\model\web\Site',
                           'FIELD'=>'hasSSL'
                           ),
                     'namespace'=>array(
                           'MODEL'=>'\model\web\Site',
                           'FIELD'=>'namespace'
                           ),
                     'websiteName'=>array(
                           'MODEL'=>'\model\web\Site',
                           'FIELD'=>'websiteName'
                           ),
                     'id_page'=>array(
                           'MODEL'=>'\model\web\Page',
                           'FIELD'=>'id_page'
                           ),
                     'tag'=>array(
                           'MODEL'=>'\model\web\Page',
                           'FIELD'=>'tag'
                           ),
                     'name'=>array(
                           'MODEL'=>'\model\web\Page',
                           'FIELD'=>'name'
                           ),
                     'date_add'=>array(
                           'MODEL'=>'\model\web\Page',
                           'FIELD'=>'date_add'
                           ),
                     'date_modified'=>array(
                           'MODEL'=>'\model\web\Page',
                           'FIELD'=>'date_modified'
                           ),
                     'id_type'=>array(
                           'MODEL'=>'\model\web\Page',
                           'FIELD'=>'id_type'
                           ),
                     'isPrivate'=>array(
                           'MODEL'=>'\model\web\Page',
                           'FIELD'=>'isPrivate'
                           ),
                     'path'=>array(
                           'MODEL'=>'\model\web\Page',
                           'FIELD'=>'path'
                           ),
                     'title'=>array(
                           'MODEL'=>'\model\web\Page',
                           'FIELD'=>'title'
                           ),
                     'tags'=>array(
                           'MODEL'=>'\model\web\Page',
                           'FIELD'=>'tags'
                           ),
                     'description'=>array(
                           'MODEL'=>'\model\web\Page',
                           'FIELD'=>'description'
                           )
                     ),
         'SOURCE'=>[
               'STORAGE'=>array(
                     'MYSQL'=>array(
                           'DEFINITION'=>array(
                                 'BASE'=>'SELECT * FROM Websites tl LEFT JOIN page tr ON tr.id_site=tl.id_site',
                                 'CONDITIONS'=>array(
                                       array(
                                             'FILTER'=>array(
                                                   'F'=>'tl.id_site',
                                                   'OP'=>'=',
                                                   'V'=>'[%id_site%]'
                                                   ),
                                             'FILTERREF'=>'id_site'
                                             )
                                       )
                                 )
                           )
                     )
             ]
               );
}
?>
