<script>
    Siviglia.Utils.buildClass(
        {
            context: 'Siviglia.types.jqwidgets',
            classes: {
                Factory:{
                    methods:{
                        getWidget:function(name,parent,container,widget,params)
                        {
                            var type=container["*"+name];
                            var d=$.Deferred();
                            if(!Siviglia.isset(params))
                                params={};
                            //if(Siviglia.isset(params.controller))
                            //    type.setController(params.controller);
                            var dv=$('<div></div>');
                            var p={};
                            if(typeof parent!=="undefined") {
                                var viewParams = parent.getFieldParams(type.__getFieldPath());
                                if (viewParams) {
                                    for (var k in viewParams)
                                        p[k] = viewParams[k];
                                }
                            }
                            p.type=type;
                            p.parent=parent;
                            p.key=name;
                            p.data=container;
                            var stack = new Siviglia.Path.ContextStack();
                            var f=function()
                                {
                                    var obj=Siviglia.Utils.stringToContextAndObject(widget);
                                    var view = new obj.context[obj.object](widget,p,
                                        {},
                                        dv,
                                        parent.__context);
                                    view.__build().then(function(){d.resolve(view)});
                                };
                            var widgetFactory = new Siviglia.UI.Expando.WidgetFactory();
                            if(!widgetFactory.hasInstance(widget))
                                SMCPromise.when(widgetFactory.getInstance(widget)).then(f);
                            else
                                f();
                            return d;

                        }
                    }
                },


                BaseTypeView: {
                    inherits: "Siviglia.UI.Expando.View,Siviglia.Dom.EventManager",
                    destruct:function()
                    {
                    },
                    methods: {
                        preInitialize: function (params) {
                            this.params=params;
                            this.data=params.data;
                            this.name=params.key;
                            this.curValue=this.data[this.name];
                            this.self=this;
                        },
                        initialize: function (params) {
                        }
                    }
                },
                String: {
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                Enum: {
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                Integer: {
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                Decimal: {
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                Text: {
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                AutoIncrement: {
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                Boolean: {
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                Relationship:{
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                Date:{
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                DateTime:{
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                Money:{
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                Password:{
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                State:{
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                Name:{
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                Street:{
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                City:{
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                Phone:{
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                UUID:{
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                },
                Dictionary:
                    {
                        inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                    },
                Container:
                    {
                        inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                    },
                Array:
                    {
                        inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                    },
                TypeSwitcher: {
                    inherits: "Siviglia.types.jqwidgets.BaseTypeView"
                }
            }
        }
    )


</script>

<div style="display:none">
    <div data-sivWidget="Siviglia.types.jqwidgets.AutoIncrement" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.AutoIncrement">
            <span data-sivValue="[%*curValue%]"></span>
    </div>
    <div data-sivWidget="Siviglia.types.jqwidgets.String" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.String">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
    <!-- nuevo para jqxwidgets-json.String -->
    <div data-sivWidget="Siviglia.types.jqwidgets-json.String"
         data-widgetCode="Siviglia.types.jqwidgets.String">
        <span data-sivValue="[%*curValue%]"></span>
    </div>

    <div data-sivWidget="Siviglia.types.jqwidgets.Enum" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.Enum">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
    <div data-sivWidget="Siviglia.types.jqwidgets.Integer" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.Integer">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
    <div data-sivWidget="Siviglia.types.jqwidgets.Decimal" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.Decimal">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
    <div data-sivWidget="Siviglia.types.jqwidgets.Text" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.Text">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
    <div data-sivWidget="Siviglia.types.jqwidgets.Boolean" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.Boolean">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
    <div data-sivWidget="Siviglia.types.jqwidgets.Date" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.Date">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
    <div data-sivWidget="Siviglia.types.jqwidgets.DateTime" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.DateTime">
        <span data-sivValue="[%*curValue%]"></span>
    </div>

    <div data-sivWidget="Siviglia.types.jqwidgets.Relationship" data-widgetParams="type,inputParams,sourceParams"
         data-widgetCode="Siviglia.types.jqwidgets.Relationship">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
    <div data-sivWidget="Siviglia.types.jqwidgets.Date" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.Date">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
    <div data-sivWidget="Siviglia.types.jqwidgets.Money" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.Money">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
    <div data-sivWidget="Siviglia.types.jqwidgets.Password" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.Password">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
    <div data-sivWidget="Siviglia.types.jqwidgets.State" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.State">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
    <div data-sivWidget="Siviglia.types.jqwidgets.Name" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.Name">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
    <div data-sivWidget="Siviglia.types.jqwidgets.Street" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.Street">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
    <div data-sivWidget="Siviglia.types.jqwidgets.City" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.City">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
    <div data-sivWidget="Siviglia.types.jqwidgets.Phone" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.Phone">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
    <div data-sivWidget="Siviglia.types.jqwidgets.UUID" data-widgetParams="name,data,view,params"
         data-widgetCode="Siviglia.types.jqwidgets.UUID">
        <span data-sivValue="[%*curValue%]"></span>
    </div>

    <div data-sivWidget="Siviglia.types.jqwidgets.Dictionary" data-widgetParams="name,data,view,params" data-widgetCode="Siviglia.types.jqwidgets.Dictionary">
        <span data-sivValue="[%*curValue%]"></span>
    </div>

    <div data-sivWidget="Siviglia.types.jqwidgets.Container" data-widgetParams="name,data,view,params" data-widgetCode="Siviglia.types.jqwidgets.Container">
        <span data-sivValue="[%*curValue%]"></span>
    </div>

<!--
    --------------------------------------------------------------------------------------------
-->
    <div data-sivWidget="Siviglia.types.jqwidgets.Array" data-widgetParams="parentObject,parentNode,value" data-widgetCode="Siviglia.types.jqwidgets.Array" class="ArrayType">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
    <!--
    ------------------------------------------------------------------------------------------------------
    -->
    <div data-sivWidget="Siviglia.types.jqwidgets.TypeSwitcher" data-widgetParams="parentObject,parentNode,value" data-widgetCode="Siviglia.types.jqwidgets.TypeSwitcher">
        <span data-sivValue="[%*curValue%]"></span>
    </div>
     <!--
            ---------------------------------------------------------------------------------------
      -->
</div>
